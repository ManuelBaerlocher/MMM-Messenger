<mat-drawer-container class="mat-drawer-container" autosize>

    <mat-drawer #drawer class="sidenav" [opened]="this.authService.loggedin" mode="side">
        <div class="logo-container center">
            <img src="assets/img/Logo.png" class="mr-16">
            <h2>M³ Messenger</h2>
        </div>

        <ul>
            <li class=" mt-16 right mb-16">
                <button mat-fab color="primary" title="Neuen Channel erstellen">
                    <mat-icon>add</mat-icon>
                </button>
            </li>
            <mat-nav-list>
                <a mat-list-item href="..." *ngFor="let channel of channellist"> {{ channel }} </a>
            </mat-nav-list>
        </ul>
        <h3 class="mt-16 text-center">Direktnachrichten</h3>
        <ul>
            <mat-nav-list>
                <a mat-list-item href="..." *ngFor="let user of userlist"> {{ user }} </a>
            </mat-nav-list>
        </ul>
    </mat-drawer>

    <div class="example-sidenav-content">
        <mat-toolbar color="primary">
            <mat-toolbar-row>
                <div style="display: flex; align-items: center;">
                    <mat-icon *ngIf="authService.currentUser$ | async as user" class="menu-icon mr-16" (click)="drawer.toggle()">menu</mat-icon>
                    <span>M³ Messenger</span>
                </div>
                <ng-container *ngIf="authService.currentUser$ | async as user; else loginButton">
                    <button mat-button [mat-menu-trigger-for]="userMenu">
                        <mat-icon>account_circle</mat-icon>
                        {{ user.displayName }}
                        <mat-icon>expand_more</mat-icon>
                    </button>
                </ng-container>

                <ng-template #loginButton>
                    <button mat-button>
                        <mat-icon>login</mat-icon>
                        Login
                    </button>
                </ng-template>
            </mat-toolbar-row>
        </mat-toolbar>
    </div>

    <div class="router-container">
        <router-outlet></router-outlet>
    </div>

    <mat-menu #userMenu="matMenu">
        <button mat-menu-item routerLink="/profile"><mat-icon>settings</mat-icon>Profile</button>
        <button mat-menu-item (click)="logout()"><mat-icon>logout</mat-icon>Logout</button>
    </mat-menu>

</mat-drawer-container>